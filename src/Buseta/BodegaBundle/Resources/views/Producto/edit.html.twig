{% extends "BusetaBodegaBundle::layout.html.twig" %}

{% block nombre_menu_superior %}

{% endblock %}

{% block titulo_encabezado %}
    Modificar del producto: "{{ entity.nombre }}"
{% endblock %}

{% block area_trabajo %}

    <form action="{{ path('producto_update',{'id':entity.id}) }}" method="post" {{ form_enctype(edit_form) }}>

        <div class="row show-grid">
            <div class="col-md-4">
                <label>Nombre:</label>
                {{ form_widget(edit_form.nombre) }}
            </div>

            <div class="col-md-4">
                <label>Código:</label>
                {{ form_widget(edit_form.codigo) }}
            </div>

            <div class="col-md-4">
                <label>Unidad de medida (U/M):</label>
                {{ form_widget(edit_form.uom) }}
            </div>
        </div>

        <div class="row show-grid">
            <div class="col-md-4">
                <label>Precio de costo:</label>
                {{ form_widget(edit_form.precio_costo) }}
            </div>

            <div class="col-md-4">
                <label>Precio de salida:</label>
                {{ form_widget(edit_form.precio_salida) }}
            </div>

            <div class="col-md-4">
                <label>Condición:</label>
                {{ form_widget(edit_form.condicion) }}
            </div>
        </div>

        <div class="row show-grid">
            <div class="col-md-4">
                <label>Bodega:</label>
                {{ form_widget(edit_form.bodega) }}
            </div>

            <div class="col-md-4">
                <label>Mínimo en bodega:</label>
                {{ form_widget(edit_form.minimo_bodega) }}
            </div>

            <div class="col-lg-4">
                <label>Máximo en bodega:</label></br>
                {{ form_widget(edit_form.maximo_bodega) }}
            </div>
        </div>

        <div class="row show-grid">
            <div class="col-md-4">
                <label>Grupo:</label>
                {{ form_widget(edit_form.grupos) }}
            </div>

            <div class="col-md-4">
                <label>Subgrupo:</label>
                {{ form_widget(edit_form.subgrupos) }}
            </div>
        </div>

        <div class="row show-grid">
            <div class="col-lg-4">
                <label>Activo:</label></br>
                {{ form_widget(edit_form.activo) }}
            </div>
        </div>

        <div class="row show-grid">
            <div class="col-md-4">

                <input class="btn btn-primary" style="height: 34px" type="submit" value="Aceptar">
                <div class="btn-group">
                    <a class="btn btn-primary" href="{{ path('producto') }}"> Cancelar</a>
                </div>
            </div>
        </div>

        {{ form_rest(edit_form) }}
    </form>
    </div>
    <!-- /.col-lg-6 -->

    </div>

{% endblock %}

{% block contenido %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $(function(){
            $('#{{ edit_form.grupos.vars.id }}').change(function(){
                var data = {
                    grupo_id: $(this).val()
                };

                $.ajax({
                    type: 'GET',
                    url: '{{ path("producto_ajax_grupos_subgrupos") }}',
                    data: data,
                    success: function(data) {
                        var values = $.parseJSON(data);
                        var $subgrupo_selector = $('#{{ edit_form.subgrupos.vars.id }}');

                        $subgrupo_selector.html('<option>---Seleccione un subgrupo---</option>');

                        for (var i=0, total = values.length; i < total; i++) {
                            $subgrupo_selector.append('<option value="' + values[i].id + '">' + values[i].valor + '</option>');
                        }
                    }
                });
            });


        });
    </script>
{% endblock %}